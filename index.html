<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quality Principle and Concept</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #e9f5ff;
      display: flex;
      justify-content: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      box-sizing: border-box;
    }

    .main-container {
      background: #c2e2f3;
      border-radius: 20px;
      padding: 25px;
      max-width: 900px;
      width: 100%;
      box-sizing: border-box;
    }

    .header {
      background: #138276;
      color: white;
      text-align: center;
      padding: 15px;
      border-radius: 15px;
      margin-bottom: 20px;
    }

    .header h1 {
      margin: 0;
      font-size: 2em;
    }

    .header p {
      margin: 5px 0 0;
      font-size: 0.9em;
    }

    .content-wrapper {
      display: flex;
      gap: 20px;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .puzzle-section {
      flex: 1;
      background: #f0faff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      min-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(18, 25px);
      gap: 1px;
      user-select: none;
      touch-action: none;
      background: #d8e5f2;
      padding: 2px;
      border-radius: 5px;
    }

    .cell {
      width: 25px;
      height: 25px;
      background-color: #f7fcff;
      border: 1px solid #c2e2f3;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #34495e;
      cursor: pointer;
      font-size: 0.9em;
      transition: background-color 0.2s ease;
    }

    .cell.selected {
      background-color: #ff9900;
      border-color: #ff8800;
    }

    .cell.found {
      background-color: #4CAF50;
      color: white;
      cursor: default;
    }

    .word-list-section {
      width: 200px;
      background: #f0faff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }

    .word-list-section h3 {
      text-align: center;
      color: #138276;
      margin: 0 0 10px 0;
    }

    .word-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .word-list li {
      padding: 5px;
      text-align: center;
      color: #4a4a4a;
    }

    .word-list li.found {
      text-decoration: line-through;
      color: #a0a0a0;
    }
    
    .found-count {
      text-align: center;
      margin-top: 15px;
      font-weight: bold;
      color: #138276;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease-in-out;
    }

    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: #222;
      color: #f0f0f0;
      padding: 40px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      max-width: 500px;
      width: 90%;
      position: relative;
      border: 2px solid #444;
    }

    .modal-content h2 {
      color: #ffcc00;
      margin-top: 0;
      font-size: 2em;
      margin-bottom: 15px;
    }

    .modal-content p {
      font-size: 1.1em;
      line-height: 1.6;
    }

    .controls {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    @media (max-width: 768px) {
      .content-wrapper {
        flex-direction: column;
        align-items: center;
      }
      .word-list-section, .puzzle-section {
        width: 100%;
        min-width: auto;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="header">
      <h1>Quality Principle and Concept</h1>
      <p>Observe carefully and find Infineon's Quality Concepts and Principles hidden in the puzzle. Each word you uncover will help you safely cross the digital bridge.</p>
    </div>

    <div class="content-wrapper">
      <div class="puzzle-section">
        <div class="grid" id="grid"></div>
        <div class="controls">
          <button id="restartBtn">Restart</button>
        </div>
      </div>
      
      <div class="word-list-section">
        <h3>Find These Words:</h3>
        <ul class="word-list" id="wordList"></ul>
        <div class="found-count">Found: <span id="foundCount">0</span>/7</div>
      </div>
    </div>
  </div>

  <div id="completionModal" class="modal-overlay">
    <div class="modal-content">
      <h2></h2>
      <p></p>
    </div>
  </div>

  <audio id="foundSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>

  <script>
    const words = [
      "RESPONSIBILITY",
      "RELIABILITY",
      "SATISFACTION",
      "COMMITMENTS",
      "FUNCTIONALITY",
      "NEEDS",
      "ZERODEFECT"
    ];

    const gridSize = 18;
    let grid = [];
    let usedCells = {};
    
    const gridContainer = document.getElementById("grid");
    const wordListEl = document.getElementById("wordList");
    const foundCountEl = document.getElementById("foundCount");
    const completionModal = document.getElementById("completionModal");
    const restartBtn = document.getElementById("restartBtn");
    const foundSound = document.getElementById("foundSound");

    let foundWords = new Set();
    let selecting = false;
    let selectedCells = [];
    let startCell = null;

    // This is the fixed puzzle grid. Do not change this to keep the words in the same location.
    const fixedGrid = [
      ['R', 'E', 'S', 'P', 'O', 'N', 'S', 'I', 'B', 'I', 'L', 'I', 'T', 'Y', 'Q', 'W', 'E', 'R'],
      ['A', 'N', 'D', 'O', 'M', 'L', 'E', 'F', 'R', 'A', 'N', 'D', 'O', 'M', 'S', 'D', 'F', 'G'],
      ['K', 'L', 'P', 'O', 'I', 'U', 'Y', 'T', 'R', 'E', 'W', 'Q', 'A', 'S', 'D', 'F', 'G', 'H'],
      ['Q', 'R', 'E', 'L', 'I', 'A', 'B', 'I', 'L', 'I', 'T', 'Y', 'W', 'E', 'R', 'T', 'Y', 'U'],
      ['N', 'D', 'O', 'M', 'S', 'T', 'R', 'N', 'I', 'N', 'G', 'S', 'D', 'F', 'G', 'H', 'J', 'K'],
      ['Z', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'N', 'E', 'E', 'D', 'S', 'K', 'J'],
      ['E', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I'],
      ['R', 'B', 'C', 'V', 'B', 'N', 'M', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'W', 'E', 'R'],
      ['O', 'X', 'Z', 'C', 'V', 'B', 'S', 'A', 'T', 'I', 'S', 'F', 'A', 'C', 'T', 'I', 'O', 'N'],
      ['D', 'F', 'G', 'H', 'J', 'K', 'L', 'P', 'O', 'I', 'U', 'Y', 'T', 'R', 'E', 'P', 'A', 'S'],
      ['E', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'L', 'K', 'J', 'H', 'G', 'H', 'J'],
      ['C', 'O', 'M', 'M', 'I', 'T', 'M', 'E', 'N', 'T', 'S', 'A', 'S', 'D', 'Q', 'W', 'E', 'S'],
      ['E', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I'],
      ['D', 'E', 'F', 'G', 'H', 'J', 'K', 'L', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'A', 'S', 'D'],
      ['T', 'Q', 'F', 'U', 'N', 'C', 'T', 'I', 'O', 'N', 'A', 'L', 'I', 'T', 'Y', 'H', 'J', 'K'],
      ['X', 'Y', 'Z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'L', 'W', 'E', 'R', 'T'],
      ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'A', 'S', 'D', 'F', 'G', 'U', 'I', 'O'],
      ['H', 'J', 'K', 'L', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'Q', 'W', 'E', 'R', 'S', 'D', 'F']
    ];

    function init() {
      foundWords.clear();
      selectedCells = [];
      selecting = false;
      startCell = null;
      completionModal.classList.remove('show');
      
      gridContainer.innerHTML = "";
      wordListEl.innerHTML = "";
      foundCountEl.textContent = '0';

      for (let y = 0; y < gridSize; y++) {
        grid[y] = [];
        for (let x = 0; x < gridSize; x++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.dataset.x = x;
          cell.dataset.y = y;
          grid[y][x] = { letter: fixedGrid[y][x], el: cell };
          gridContainer.appendChild(cell);
        }
      }
      
      for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {
          grid[y][x].el.textContent = grid[y][x].letter;
          grid[y][x].el.classList.remove("found", "selected");
        }
      }

      words.forEach(word => {
        const li = document.createElement("li");
        li.textContent = word;
        li.dataset.word = word;
        wordListEl.appendChild(li);
      });
    }

    function selectCell(cell) {
      if (!startCell) return;
      
      const endX = parseInt(cell.dataset.x);
      const endY = parseInt(cell.dataset.y);
      const startX = parseInt(startCell.dataset.x);
      const startY = parseInt(startCell.dataset.y);

      const isHorizontal = startY === endY;
      const isVertical = startX === endX;
      const isDiagonal = Math.abs(startX - endX) === Math.abs(startY - endY);

      if (!isHorizontal && !isVertical && !isDiagonal) {
        selectedCells.forEach(c => c.classList.remove("selected"));
        selectedCells = [startCell];
        startCell.classList.add("selected");
        return;
      }

      selectedCells.forEach(c => c.classList.remove("selected"));
      selectedCells = [];

      const dx = Math.abs(endX - startX);
      const dy = Math.abs(endY - startY);
      const sx = (startX < endX) ? 1 : -1;
      const sy = (startY < endY) ? 1 : -1;
      let err = dx - dy;

      let currentX = startX;
      let currentY = startY;

      while (true) {
        if (currentX >= 0 && currentX < gridSize && currentY >= 0 && currentY < gridSize) {
          const pathCellEl = grid[currentY][currentX].el;
          pathCellEl.classList.add("selected");
          selectedCells.push(pathCellEl);
        }

        if (currentX === endX && currentY === endY) break;
        const e2 = 2 * err;

        if (e2 > -dy) {
          err -= dy;
          currentX += sx;
        }
        if (e2 < dx) {
          err += dx;
          currentY += sy;
        }
      }
    }

    function checkSelected() {
      if (selectedCells.length === 0) return;
      const word = selectedCells.map(cell => cell.textContent).join("");
      const reverse = selectedCells.map(cell => cell.textContent).reverse().join("");

      const foundWord = words.find(w => (w === word || w === reverse) && !foundWords.has(w));
      if (foundWord) {
        selectedCells.forEach(cell => cell.classList.add("found"));
        foundWords.add(foundWord);

        const wordItem = [...wordListEl.children].find(li => li.dataset.word === foundWord);
        if (wordItem) wordItem.classList.add("found");
        
        foundCountEl.textContent = foundWords.size;
        foundSound.currentTime = 0;
        foundSound.play();

        if (foundWords.size === words.length) {
          const modalTitle = completionModal.querySelector('.modal-content h2');
          const modalText = completionModal.querySelector('.modal-content p');
          modalTitle.textContent = "ðŸ”‘ Code Unlocked!";
          modalText.innerHTML = "Congratulations, Quality Advocates! You've uncovered all 7 hidden Quality Principles and Concepts - your key to crossing the digital bridge. <br><br> You escaped!";
          completionModal.classList.add('show');
        }
      }
    }

    gridContainer.addEventListener("mousedown", e => {
      if (!e.target.classList.contains("cell") || e.target.classList.contains("found")) return;
      selecting = true;
      startCell = e.target;
      startCell.classList.add("selected");
      selectedCells = [startCell];
    });

    gridContainer.addEventListener("mouseover", e => {
      if (selecting && e.target.classList.contains("cell") && !e.target.classList.contains("found")) {
        selectCell(e.target);
      }
    });

    document.addEventListener("mouseup", () => {
      if (!selecting) return;
      selecting = false;
      checkSelected();
      selectedCells.forEach(cell => cell.classList.remove("selected"));
      selectedCells = [];
      startCell = null;
    });

    gridContainer.addEventListener("touchstart", e => {
      const target = e.target;
      if (target.classList.contains("cell") && !target.classList.contains("found")) {
        e.preventDefault();
        selecting = true;
        startCell = target;
        startCell.classList.add("selected");
        selectedCells = [startCell];
      }
    });
    gridContainer.addEventListener("touchmove", e => {
      e.preventDefault();
      const touch = e.touches[0];
      const element = document.elementFromPoint(touch.clientX, touch.clientY);
      if (selecting && element && element.classList.contains("cell") && !element.classList.contains("found")) {
        selectCell(element);
      }
    });
    gridContainer.addEventListener("touchend", () => {
      if (!selecting) return;
      selecting = false;
      checkSelected();
      selectedCells.forEach(cell => cell.classList.remove("selected"));
      selectedCells = [];
      startCell = null;
    });

    restartBtn.addEventListener("click", init);

    init();
  </script>
</body>
</html>
